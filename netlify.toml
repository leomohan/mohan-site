# netlify.toml
[build]
  # The directory that contains the deploy-ready HTML files and assets generated by the build.
  # This must match the 'publicFolder' in your tina/config.ts
  publish = "public"

  # The command to run to build your site.
  # Order is crucial:
  # 1. npm install: Installs all dependencies.
  # 2. tinacms build: Generates the TinaCMS client and admin assets (including tina/__generated__/client.js).
  # 3. node build-content.js: Runs your script to fetch data using the now-generated client and populate HTML.
  command = "npm install && tinacms build && node build-content.js"

# Optional: If you have Netlify Functions, specify their directory
# [functions]
#   directory = "netlify/functions" # Example path, adjust if you have functions

# Optional: Redirects (if you need them)
# [[redirects]]
#   from = "/old-path"
#   to = "/new-path"
#   status = 301